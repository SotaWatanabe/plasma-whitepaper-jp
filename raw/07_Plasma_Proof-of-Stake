Plasma 7章 Plasma Proof of Stake

[https://gyazo.com/14bed232a11b8505a0c1ee779fbd1e8d]
この章ではシンプルなPoSの構築を目的とする。おそらく最適なPoSの設計にはなりそうにないが、Plasmaチェーンで何が可能かということの概説になればと思う。
これまで我々はPlasmaチェーンのブロックに署名する責任のあるオペレーターは単一のエンティティだと仮定してきた。もし彼らが不正なブロックを生成した場合、ブロックデータを持つ誰もが不正証明を生成し、その部録をロールバックし、オペレーターにペナルティを与えることができる。この証明はオペレーターがブロックに署名をしているから可能なことである。ルートチェーンのPlasmaブロックマークル化されたコミットの発行（そしてPlasmaチェーンのもっともblock heightの高いブロックがその子チェーンの状態更新のコミットを含んでいること）は、したがって状態更新が整列され、適切な振る舞いになるように制約されている。

[https://gyazo.com/ca9f51565bf366022be4ac8f8561cebf]
しかし、多くのケースでシングルパーティーののPoA(Proof of Authority)チェーンよりもPoSチェーンを作ることが好ましい。block withholdingのリスクを最小化できるからだ（PoSとPoAのチェーンをネストさせて両者のメリットを得ることも可能である）。トークンのあるPoSチェーンは、トークン価値をビザンチンな振る舞いが毀損するので、トークンホルダーに正しくオペレーションするようインセンティブを与えることもできる。Plasmaチェーンのトークン利用についての詳細は後に詳解する。
ルートチェーンのロバストさに依存しているので、PoSの構築はPlasmaの中で構築するほうが容易い。withholding攻撃、ファイナリティ、その他の要素に関する問題はルートチェーンの信頼性に依存する。Plasmaチェーンはルートチェーンと同等にセキュアになれる。もしルートチェーンがPoWベースで動いているなら、これはPoW上のPoSだ（PoWの上のPlasmaとも言える）。もしルートチェーンがPoSなら、この構造はPoS上のPoSで、PoSのメカニズムはルートチェーンのPoSよりも幾分シンプルになるだろう。


[https://gyazo.com/e388d5ff83cea5647d2e698c1927b2c8]
ナカモトコンセンサス（PoW）のインセンティブを模倣してみる。もっとも重要なインセンティブは、他のマイナーへのブロック伝播だ。
多くの既存のPoSメカニズムの提案はリーダー選挙に依存していて、時刻t0においてリーターが立候補し、時刻t1においてリーダーはブロックを生成する権利を得る。これはブロック伝播におけるナカモトコンセンサスのインセンティブを模倣できていない。ナカモトコンセンサスはリーダー選出をするが、それは確率的なリーダー選出である。もし誰かがブロックを見つけたら、その人は自分がリーダーだろうと信じるが、それは完全に確かなわけではない。他の誰かも同時にブロックを掘る可能性は残されているのだ。オッズを最大化する最善の方法は発見したブロックを可能な限り遠く広くに素早く伝播することなのだ。これは情報可用性に対してインセンティブをもたらす。
PlasmaのPoSの設計はこれと似たようなことをする必要がある。
ブロックを可能な限り遠く広く伝播することを支援したいのでトレードオフを考えなければならない。しかし他の設計もありえるかもしれない（特に、ブランチにランダムなスコアを付与し、もっとも高いスコアのブランチに決定した事実に基づいたランダムで確率的なリーダー選出を用いて）。

[https://gyazo.com/5f68e0d7ab8227cd7c8e90f474afff50]
これはPoSのシンプルな設計の提案だが、おそらく最適なものにかなり近いと思われる。ゴールはPlasmaの使用に耐えうるシンプルな設計を得ることだ。

[https://gyazo.com/d827fa4bd1fd3949bd76b2aa6c6653cb]
強制力をともなうメカニズムを作る代わりに、正しい振る舞い（即時のブロック伝播）へ単純にインセンティブを作るアプローチだ。
フィーはルートチェーンのコントラクトによって配布され、もし必要なら定期的に払い出しできる。しかし監査はPlasmaチェーン内で行われる。
Stakingコントラクトの一部として、資金は移譲したstakerに配布される。stakerはユーザーの代わりに振る舞う責任があり、stakerが不正を行うとユーザーがペナルティを受ける。Stakingは一定時間でコミットされる（例：三ヶ月）。stakerごとの最少額は全トークンの1％で、最大額は最大トークン量の5％だ。もし誰かが5％以上割り当てたいのなら、複数のアイデンティティを使うとよい（51％カルテルの効能を最小化してデータの分散化を最大化することが目的だ）。
資金は100Plasmaブロックが全参加者の代表であるように割り当てされる。例えば誰かが3％の資金をstakeしたとして彼らは過去の100ブロックの3％でないといけない。もしその量よりもstakeが多ければ、そのstakerはブロックの過大なコミットによる余剰分の報酬は得られない。もし過去の100ブロックのうち3つより少ないブロックしかなかった場合、現在のブロック生成者はより少ないリワードを得る。ルートチェーンのブロック1つに対して1ブロックしか割り当てられない。

[https://gyazo.com/b032c8c7eeab24b316e4cb681022102c]
これは全参加者がみなのブロックを平等に保持することを促進する。想定では強制メカニズムは必要なく、参加者は報酬の最大化のためになんらかのスキーム（例：ラウンドロビン）を用意および保証するだろう。
もし彼らが不正確なブロックの数のせいでトランザクション手数料を最大化できなかったとき、資金はプールに割り当てられ、将来のブロックで割り当てられる。
結果として全員の参加を経済的に促進する。
しかし、これはstakerたちの正確な参加を促進しているだけなので、完全ではない。(TODO)毎ブロックは、過去100ブロックに関するブロックのランダムな部分での、データへのマークル化されたコミットである。これはstakerに全ブロックデータ持つことを強制し、ブロック作成者に継続的にブロックを全stakerに伝播することを強制する。
このチェーンのチップは最大の報酬によって決定され、もし並行するブランチがあるなら、勝者は最大の手数料報酬を最大の参加者から得た者である。
この設計は51％攻撃を防止するために設計したものではなく、代わりにブロック伝播を促進するために設計された（もし誰かがblock withholdを行った場合に対して）。加えて、この設計は情報可用性とルートチェーンに偏りなくブロックが含まれていることに依存していて、この手のPoSをルートチェーンで作るのはデータ可用性と検閲インセンティブのせいで不可能である。


